!function(e){function t(){function t(e){"remove"===e&&this.each(function(e,t){var i=s(t);i&&i.remove()}),this.find("span.mceEditor,div.mceEditor").each(function(e,t){var i=tinyMCE.get(t.id.replace(/_parent$/,""));i&&i.remove()})}function n(e){var n,s=this;if(e!==i)t.call(s),s.each(function(t,i){var n;(n=tinyMCE.get(i.id))&&n.setContent(e)});else if(s.length>0&&(n=tinyMCE.get(s[0].id)))return n.getContent()}function s(e){var t=null;return e&&e.id&&o.tinymce&&(t=tinyMCE.get(e.id)),t}function r(e){return!!(e&&e.length&&o.tinymce&&e.is(":tinymce"))}var a={};e.each(["text","html","val"],function(t,o){var l=a[o]=e.fn[o],c="text"===o;e.fn[o]=function(t){var o=this;if(!r(o))return l.apply(o,arguments);if(t!==i)return n.call(o.filter(":tinymce"),t),l.apply(o.not(":tinymce"),arguments),o;var a="",u=arguments;return(c?o:o.eq(0)).each(function(t,i){var n=s(i);a+=n?c?n.getContent().replace(/<(?:"[^"]*"|'[^']*'|[^'">])*>/g,""):n.getContent():l.apply(e(i),u)}),a}}),e.each(["append","prepend"],function(t,n){var o=a[n]=e.fn[n],l="prepend"===n;e.fn[n]=function(e){var t=this;return r(t)?e!==i?(t.filter(":tinymce").each(function(t,i){var n=s(i);n&&n.setContent(l?e+n.getContent():n.getContent()+e)}),o.apply(t.not(":tinymce"),arguments),t):void 0:o.apply(t,arguments)}}),e.each(["remove","replaceWith","replaceAll","empty"],function(i,n){var s=a[n]=e.fn[n];e.fn[n]=function(){return t.call(this,n),s.apply(this,arguments)}}),a.attr=e.fn.attr,e.fn.attr=function(t,o,l){var c=this;if(!t||"value"!==t||!r(c))return a.attr.call(c,t,o,l);if(o!==i)return n.call(c.filter(":tinymce"),o),a.attr.call(c.not(":tinymce"),t,o,l),c;var u=c[0],d=s(u);return d?d.getContent():a.attr.call(e(u),t,o,l)}}var i,n,s=[],o=window;e.fn.tinymce=function(i){function r(){var n=[],s=0;t&&(t(),t=null),d.each(function(e,t){var o,r=t.id,a=i.oninit;r||(t.id=r=tinymce.DOM.uniqueId()),o=new tinymce.Editor(r,i),n.push(o),o.onInit.add(function(){var e,t=a;d.css("visibility",""),a&&++s==n.length&&(tinymce.is(t,"string")&&(e=-1===t.indexOf(".")?null:tinymce.resolve(t.replace(/\.\w+$/,"")),t=tinymce.resolve(t)),t.apply(e||tinymce,n))})}),e.each(n,function(e,t){t.render()})}var a,l,c,u,d=this,h="",p="";return d.length?i?(d.css("visibility","hidden"),o.tinymce||n||!(a=i.script_url)?1===n?s.push(r):r():(n=1,l=a.substring(0,a.lastIndexOf("/")),/_(src|dev)\.js/g.test(a)&&(p="_src"),c=a.lastIndexOf("?"),-1!=c&&(h=a.substring(c+1)),o.tinyMCEPreInit=o.tinyMCEPreInit||{base:l,suffix:p,query:h},-1!=a.indexOf("gzip")&&(u=i.language||"en",a=a+(/\?/.test(a)?"&":"?")+"js=true&core=true&suffix="+escape(p)+"&themes="+escape(i.theme)+"&plugins="+escape(i.plugins)+"&languages="+u,o.tinyMCE_GZ||(tinyMCE_GZ={start:function(){function t(e){tinymce.ScriptLoader.markDone(tinyMCE.baseURI.toAbsolute(e))}tinymce.suffix=p,t("langs/"+u+".js"),t("themes/"+i.theme+"/editor_template"+p+".js"),t("themes/"+i.theme+"/langs/"+u+".js"),e.each(i.plugins.split(","),function(e,i){i&&(t("plugins/"+i+"/editor_plugin"+p+".js"),t("plugins/"+i+"/langs/"+u+".js"))})},end:function(){}})),e.ajax({type:"GET",url:a,dataType:"script",cache:!0,success:function(){tinymce.dom.Event.domLoaded=1,n=2,i.script_loaded&&i.script_loaded(),r(),e.each(s,function(e,t){t()})}})),d):tinyMCE.get(d[0].id):d},e.extend(e.expr[":"],{tinymce:function(e){return!(!e.id||!tinyMCE.get(e.id))}})}(jQuery);